<?xml version="1.0" encoding="UTF-8"?>

<!--Autogenerated by Cloudera Manager-->
<configuration>
    <!-- 根因分析回调接口 -->
    <property>
        <name>root.exception.notify.url</name>
        <value>http://ht-analysis.ztosys.com/exception</value>
    </property>
    <!-- 自定义身份验证 -->
    <property>
        <name>hive.server2.authentication</name>
        <value>CUSTOM</value>
    </property>
    <!-- Default Value: 100 in Hive 0.11.0, 500 in Hive 0.12.0 and later 500 -->
    <!-- thrift worker 线程数 -->
    <property>
        <name>hive.server2.thrift.max.worker.threads</name>
        <value>100</value>
    </property>
    <!-- session/operation 超时检查时间间隔 默认0ms -->
    <property>
        <name>hive.server2.session.check.interval</name>
        <value>900000</value>
    </property>
    <!-- operation.log 位置-->
    <property>
        <name>hive.server2.logging.operation.log.location</name>
        <value>/opt/apache/hive-1.1.0/logs/operation_logs</value>
    </property>
    <!-- 自定义身份验证实现类 -->
    <property>
        <name>hive.server2.custom.authentication.class</name>
        <value>com.zto.hive.CustomHiveServer2Auth</value>
    </property>
    <!-- session timeout 时长 默认0ms -->
    <property>
        <name>hive.server2.idle.session.timeout</name>
        <value>43200000</value>
    </property>
    <!-- 是否开启hiveserver2 metrics 默认false -->
    <property>
        <name>hive.server2.metrics.enabled</name>
        <value>true</value>
    </property>
    <!-- hiveserver2 操作超时时长 默认0ms -->
    <property>
        <name>hive.server2.idle.operation.timeout</name>
        <value>21600000</value>
    </property>
    <!-- hiveserver2 服务动态发现 zk上的namespace  -->
    <property>
        <name>hive.server2.zookeeper.namespace</name>
        <value>ztohive2</value>
    </property>
    <!-- hbase zk端口-->
    <property>
        <name>hbase.zookeeper.property.clientPort</name>
        <value>2181</value>
    </property>
    <!-- zk 节点 -->
    <property>
        <name>hive.zookeeper.quorum</name>
        <value>hzpl009044104-batch-fat.hzpl.ztosys.com,hzpl009044105-batch-fat.hzpl.ztosys.com,hzpl009044106-batch-fat.hzpl.ztosys.com,hzpl009044107-batch-fat.hzpl.ztosys.com,hzpl009044108-batch-fat.hzpl.ztosys.com</value>
    </property>
    <property>
        <name>hive.zookeeper.client.port</name>
        <value>2181</value>
    </property>
    <!-- hive zk上的父节点 -->
    <property>
        <name>hive.zookeeper.namespace</name>
        <value>hive_zookeeper_namespace_hive</value>
    </property>
    <!-- 创建表的owner 对表所拥有的权限-->
    <property>
        <name>hive.security.authorization.createtable.owner.grants</name>
        <value>ALL</value>
    </property>
    <!-- 开启client 权限验证 默认false -->
    <property>
        <name>hive.security.authorization.enabled</name>
        <value>true</value>
    </property>
    <!-- hive安全验证实现类 默认 org.apache.hadoop.hive.ql.parse.authorization.HiveAuthorizationTaskFactoryImpl -->
    <property>
        <name>hive.security.authorization.task.factory</name>
        <value>org.apache.hadoop.hive.ql.parse.authorization.HiveAuthorizationTaskFactoryImpl</value>
    </property>
    <!-- pre hook 列表 -->
    <property>
        <name>hive.exec.pre.hooks</name>
        <value>com.zto.AlluxioHiveHook,com.zto.hive.hook.AlterColumnHook</value>
    </property>
    <property>
        <name>hive.exec.failure.hooks</name>
        <value>com.zto.AlluxioHiveHook</value>
    </property>
    <!-- post hook列表  -->
    <property>
        <name>hive.exec.post.hooks</name>
        <value>com.zto.AlluxioHiveHook,com.zto.ht.hook.AnalysisHook</value>
    </property>
    <!-- HiveAuthHook hive授权 -->
    <property>
        <name>hive.semantic.analyzer.hook</name>
        <value>com.zto.hive.HiveAuthHook,hook.HiveOrcAnalyzeHook</value>
    </property>
    <!-- hive获取 文件信息的线程数大小，比如获取文件大小，表的文件数 -->
    <property>
        <name>hive.exec.input.listing.max.threads</name>
        <value>15</value>
    </property>
    <!-- 每个 reduce task处理数据大小 默认256000000 -->
    <property>
        <name>hive.exec.reducers.bytes.per.reducer</name>
        <value>1073741824</value>
    </property>
    <!--  ORC写缓冲大小 默认67108864 -->
    <property>
        <name>hive.exec.orc.default.stripe.size</name>
        <value>134217728</value>
    </property>
    <!-- ORC文件压缩格式  默认ZLIB -->
    <property>
        <name>hive.exec.orc.default.compress</name>
        <value>SNAPPY</value>
    </property>
    <!-- reduce task 最大数 -->
    <property>
        <name>hive.exec.reducers.max</name>
        <value>1099</value>
    </property>
    <!-- hive默认仓库地址 -->
    <property>
        <name>hive.metastore.warehouse.dir</name>
        <value>/user/hive/warehouse</value>
    </property>
    <!-- hive metastore 地址列表 -->
    <property>
        <name>hive.metastore.uris</name>
        <value>thrift://hzpl009044107-batch-fat.hzpl.ztosys.com:9083,thrift://hzpl009044108-batch-fat.hzpl.ztosys.com:9083,thrift://hzpl009044106-batch-fat.hzpl.ztosys.com:9083</value>
    </property>
    <!-- metastore socket 超时时间 默认600s -->
    <property>
        <name>hive.metastore.client.socket.timeout</name>
        <value>300</value>
    </property>

    <!-- 合并小文件在最后一个mapreduce job中 -->
    <property>
        <name>hive.merge.mapredfiles</name>
        <value>true</value>
    </property>
    <!-- 触发小文件合并的 文件平均大小 默认16000000 -->
    <property>
        <name>hive.merge.smallfiles.avgsize</name>
        <value>134217728</value>
    </property>
    <!-- 文件合并后的大小 默认256000000 -->
    <property>
        <name>hive.merge.size.per.task</name>
        <value>268435456</value>
    </property>
    <!-- 对于多表 join时,其中 n-1个表的大小总和小于该值，并且 hive.auto.convert.join.noconditionaltask 为true时，将join转换成 mapjoin 10000000 -->
    <property>
        <name>hive.auto.convert.join.noconditionaltask.size</name>
        <value>20971520</value>
    </property>
    <!-- 禁止通过从 metastore获取列的统计信息 默认false -->
    <property>
        <name>hive.stats.fetch.column.stats</name>
        <value>true</value>
    </property>
    <!-- 支持 hive.fetch.task.conversion 功能的表大小 阈值 默认1073741824 -->
    <property>
        <name>hive.fetch.task.conversion.threshold</name>
        <value>268435456</value>
    </property>
    <!-- hiveserver2 metrics 日志位置 -->
    <property>
        <name>hive.service.metrics.file.location</name>
        <value>/opt/apache/hive-1.1.0/logs/metrics-hiveserver2/metrics.log</value>
    </property>
    <!-- 更新 metrics 的频度 5s -->
    <property>
        <name>hive.service.metrics.file.frequency</name>
        <value>30000</value>
    </property>
    <!-- 是否支持 向量化执行 默认 true -->
    <property>
        <name>hive.vectorized.execution.reduce.enabled</name>
        <value>false</value>
    </property>
    <!-- 在用于top K选择的RS运算符中，用于哈希的最大内存。默认值“-1”表示不限制 -->
    <property>
        <name>hive.limit.pushdown.memory.usage</name>
        <value>0.1</value>
    </property>
    <!-- 是否 支持并发,需有锁管理器false -->
    <property>
        <name>hive.support.concurrency</name>
        <value>true</value>
    </property>
  <property>
    <name>hive.cbo.enable</name>
    <value>false</value>
  </property>
                <!-- 判断 表为小表 的阈值 ，来判断是否 将common join 转换成 map join  25000000 -->
    <property>
        <name>hive.mapjoin.smalltable.filesize</name>
        <value>67108864</value>
    </property>
    <!-- 参考 hive.auto.convert.join.noconditionaltask.size  默认为true -->
    <property>
        <name>hive.auto.convert.join.noconditionaltask</name>
        <value>true</value>
    </property>
            <!--  根因分析推送的redis信息 -->
    <property>
        <name>redis.cluster.password</name>
        <value>5d26e2a8948e48d6942837b6bd59a77c</value>
    </property>
    <property>
        <name>redis.cluster.nodes</name>
        <value>redis4c2m1.testredis.ztosys.com:6381,redis4c2s1.testredis.ztosys.com:6382,redis4c2m2.testredis.ztosys.com:6381,redis4c2s2.testredis.ztosys.com:6381,redis4c2m3.testredis.ztosys.com:6382,redis4c2s3.testredis.ztosys.com:6382</value>
    </property>
    <!--  锁表通知url -->
    <property>
        <name>hive.lock.notify.url</name>
        <value>http://hzpl009044134-batch-fat.hzpl.ztosys.com/hdsp/api/asc/admin/lockTable/sendMessage</value>
    </property>
    <!--  jobname长度 -->
    <property>
        <name>hive.jobname.length</name>
        <value>150</value>
    </property>
    <!--  常量优化器 -->
    <property>
        <name>hive.optimize.constant.propagation</name>
        <value>true</value>
    </property>
    <!--HMS 权限 listener-->
    <property>
        <name>hive.metastore.drop.whitelist.ip</name>
        <value>10.9.44.102,10.9.44.106,10.9.44.107,10.9.44.108</value>
    </property>
    <property>
        <name>hive.metastore.drop.whitelist.db</name>
        <value>tmp,ba,wuda_test001_hiveguanli,dim,ods,test_auto,db_test,st</value>
    </property>
    <property>
        <name>hive.metastore.pre.event.listeners</name>
        <value>com.zto.hive.metastore.PrivilegeListener</value>
    </property>
</configuration>
